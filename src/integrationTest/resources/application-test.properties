spring.application.name=development-hour-management-integration-test

# Datasource configuration is provided by Testcontainers dynamically
# See AbstractMapperTest for MySQL container configuration

# HikariCP configuration
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000

# MyBatis Configuration
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.type-aliases-package=com.devhour.domain.model
mybatis.type-handlers-package=com.devhour.infrastructure.typehandler
mybatis.configuration.default-fetch-size=100
mybatis.configuration.default-statement-timeout=30

# Enable Flyway for integration tests
spring.flyway.enabled=true
spring.flyway.clean-disabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false
spring.flyway.validate-migration-naming=false
spring.flyway.ignore-migration-patterns=*:checksum,*:missing

# Logging Configuration
logging.level.com.devhour=INFO
logging.level.org.mybatis=INFO

# Allow bean definition overriding for tests
spring.main.allow-bean-definition-overriding=true

# Completely disable OAuth2, Okta, and HTTP Client AutoConfigurations for tests
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration,com.okta.spring.boot.oauth.OktaOAuth2AutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,com.okta.spring.boot.oauth.OktaResourceServerAutoConfiguration,com.okta.spring.boot.oauth.OktaClientAutoConfiguration,org.springframework.boot.autoconfigure.http.client.HttpClientAutoConfiguration,org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,org.springframework.boot.autoconfigure.web.client.RestClientAutoConfiguration

# Disable Okta security explicitly
security.okta.enabled=false

# Okta Configuration Properties for tests
okta.issuer-uri=https://test-123456.okta.com/oauth2/default
okta.jwk-set-uri=https://test-123456.okta.com/oauth2/default/v1/keys


# Disable Spring Boot's default security user
spring.security.user.name=test
spring.security.user.password=test
spring.security.user.roles=USER
